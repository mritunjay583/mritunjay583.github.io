<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Section #  Section renders pages in section as definition list, using title and description.
Example #  {{&lt; section &gt;}}   create index in dmdb  Using the following doc requires you the name of the table. If you don&rsquo;t know the tablename here&rsquo;s a doc through which you can find out here - # navigation-around-views-and-tables after reading this. List Already Existing Index on a tables # -- For listing all indexes on all partititioned table name select * from pg_indexes where schemaname = &#39;partitioned&#39;; -- For listing all indexes on all standalone table name select * from pg_indexes where schemaname = &#39;standalone&#39;; -- For listing all indexes on package__wbn__latest_prtd partititioned table select * from pg_indexes where schemaname = &#39;partitioned&#39; and tablename = &#39;package__wbn__latest_prtd&#39;; -- For listing all indexes on package_scan__wbn_cs_uid__latest_prtd partititioned table select * from pg_indexes where schemaname = &#39;standalone&#39; and tablename = &#39;facility__facility_code__latest_std&#39;; To create index # Convention 1 of index naming [DEFAULT] :   datamart creation guidelines  DataMarts Creation/Updation in DMDB # Why use datamarts and not access data directly with full SQL from application (the widely/mostly known acceptable way) # Reusability - With each metric anyone writes it is contributed to Org and will be available to use for others.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://mritunjay583.github.io/docs/docs/usage-guidelines/" />

<title>Usage Guidelines | DATAMART</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.e246e6a45b940b6ff71d8216783f10a80d910290a7c364c8bfd5d305d8545d62.css" integrity="sha256-4kbmpFuUC2/3HYIWeD8QqA2RApCnw2TIv9XTBdhUXWI=">
<script defer src="/en.search.min.04dea4370b56e4f2b68a0b04d656bed9137be5574171370858866b5246cce744.js" integrity="sha256-BN6kNwtW5PK2igsE1la&#43;2RN75VdBcTcIWIZrUkbM50Q="></script>
<link rel="alternate" type="application/rss+xml" href="http://mritunjay583.github.io/docs/docs/usage-guidelines/index.xml" title="DATAMART" />
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a href="/"><span>DATAMART</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  



  
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-6d87ea0de7b98d214d87150d1024f51e" class="toggle" checked />
    <label for="section-6d87ea0de7b98d214d87150d1024f51e" class="flex justify-between">
      <a href="http://mritunjay583.github.io/docs/docs/" class="">Docs</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-76e70ba71162eb688a4952e5576fd6b7" class="toggle"  />
    <label for="section-76e70ba71162eb688a4952e5576fd6b7" class="flex justify-between">
      <a href="http://mritunjay583.github.io/docs/docs/developer/" class="">Developer</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="http://mritunjay583.github.io/docs/docs/developer/db-design-solution-hld/" class="">Db-Design-Solution</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://mritunjay583.github.io/docs/docs/developer/db-design-use-case-problem-analysis/" class="">db-design-use-case-problem-analysis</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://mritunjay583.github.io/docs/docs/developer/documentation-publish/" class="">documentation publish</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://mritunjay583.github.io/docs/docs/developer/outcomes-limitations-support/" class="">outcomes limitations support</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://mritunjay583.github.io/docs/docs/developer/roadmap/" class="">Roadmap</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-e9be04ad509fc93ce902011efeae48af" class="toggle" checked />
    <label for="section-e9be04ad509fc93ce902011efeae48af" class="flex justify-between">
      <a href="http://mritunjay583.github.io/docs/docs/usage-guidelines/" class="active">Usage Guidelines</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="http://mritunjay583.github.io/docs/docs/usage-guidelines/create-indexes-in-dmdb-guidlines/" class="">create index in dmdb</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://mritunjay583.github.io/docs/docs/usage-guidelines/datamarts-creations-guidelines/" class="">datamart creation guidelines</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://mritunjay583.github.io/docs/docs/usage-guidelines/dmdb-usage-guide/" class="">dmdb usage</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://mritunjay583.github.io/docs/docs/usage-guidelines/metric_table-design-and-usage/" class="">metric table design</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://mritunjay583.github.io/docs/docs/usage-guidelines/navigation-around-views-and-tables/" class="">navigation-around-views-and-tables</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://mritunjay583.github.io/docs/docs/usage-guidelines/api/offset-management-apis-usage/" class="">Offset management</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://mritunjay583.github.io/docs/docs/usage-guidelines/programmatic-access-and-integration/" class="">programmatic access and Integration</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var a=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Usage Guidelines</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#example">Example</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="section">
  Section
  <a class="anchor" href="#section">#</a>
</h1>
<p>Section renders pages in section as definition list, using title and description.</p>
<h2 id="example">
  Example
  <a class="anchor" href="#example">#</a>
</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl"><span style="color:#75715e">{{</span><span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">section</span> <span style="color:#f92672">&gt;</span><span style="color:#75715e">}}</span>
</code></pre></div><dl>

  <dt>
    <a href="/docs/docs/usage-guidelines/create-indexes-in-dmdb-guidlines/">create index in dmdb</a>
  </dt>
  <dd class="markdown-inner">
    Using the following doc requires you the name of the table. If you don&rsquo;t know the tablename here&rsquo;s a doc through which you can find out here - #   navigation-around-views-and-tables after reading this.
 List Already Existing Index on a tables #  -- For listing all indexes on all partititioned table name select * from pg_indexes where schemaname = 'partitioned'; -- For listing all indexes on all standalone table name select * from pg_indexes where schemaname = 'standalone'; -- For listing all indexes on package__wbn__latest_prtd partititioned table select * from pg_indexes where schemaname = 'partitioned' and tablename = 'package__wbn__latest_prtd'; -- For listing all indexes on package_scan__wbn_cs_uid__latest_prtd partititioned table select * from pg_indexes where schemaname = 'standalone' and tablename = 'facility__facility_code__latest_std'; To create index #  Convention 1 of index naming [DEFAULT] :
  </dd>

  <dt>
    <a href="/docs/docs/usage-guidelines/datamarts-creations-guidelines/">datamart creation guidelines</a>
  </dt>
  <dd class="markdown-inner">
    DataMarts Creation/Updation in DMDB #  Why use datamarts and not access data directly with full SQL from application (the widely/mostly known acceptable way) #   Reusability - With each metric anyone writes it is contributed to Org and will be available to use for others. Numerous users do not have to write same query again. Standard Of metrics definition - When a metric calculation in a single way Org wide, it will be easier to standardize the definition for that metric.
  </dd>

  <dt>
    <a href="/docs/docs/usage-guidelines/dmdb-usage-guide/">dmdb usage</a>
  </dt>
  <dd class="markdown-inner">
    Definition of Datamart (dm) #  Datamart is a subset / aggregation / filtered / limited by columns of Raw.
Is DMDB right for you? (Use-cases) #  Understanding the raw dataset naming convention #  Convention:
 Latest Based Table - {schema_name}{naming_convention}.{table_name}{primary_key_column_list_on_which_the_latest_is_taken_on}{method}{column_name_convention} eg. Package Scan Latest - raw_u.package_scan__wbn_cs_uid__latest_u Append Only Table - {schema_name}{naming_convention}.{table_name}{column_name_convention} eg. Audit Scan Append - raw_u.audit_scan_u  Quering data Guidelines #    Always action_date as the first filter and never forget to put typecast of bigint in the end.
  </dd>

  <dt>
    <a href="/docs/docs/usage-guidelines/metric_table-design-and-usage/">metric table design</a>
  </dt>
  <dd class="markdown-inner">
    Problem Statement (In RTDB) #   The current problem in RTDB is that every metric (i.e. data of every widget) is served by a dedicated table  Maintenance overhead of these tables like bloat, deletion etc   Privelege control management of these metrics tables are not done. Everything is in under public schema and everyone can access every metric Redundancy of metrics i.e. same (similar/overlapping metrics) are calcualated from the very start No structure of creating aggregations over aggregations  Structure of Serving Metrics #   We have categorized the metrics in 2 parts -  Day before Yesterday Metrics and even Before - MATERIALIZED in a table (aka Historical) CURRENT_DAY and PREVIOUS_DAY (IST) of Metrics - NOT MATERIALIZED - LIVE QUERY ONLY (aka recent) -    Why materialization of metrics is required?
  </dd>

  <dt>
    <a href="/docs/docs/usage-guidelines/navigation-around-views-and-tables/">navigation-around-views-and-tables</a>
  </dt>
  <dd class="markdown-inner">
    Query to get table name from view name #  -- referenced_table_name will contain the tablename SELECT * FROM (SELECT u.view_schema AS schema_nameD, u.view_name, u.table_schema AS referenced_table_schema, u.table_name AS referenced_table_name, v.view_definition FROM information_schema.view_table_usage u JOIN information_schema.views v ON u.view_schema = v.table_schema AND u.view_name = v.table_name WHERE u.table_schema NOT IN ('information_schema', 'pg_catalog') --- CHANGE VIEW NAME HERE AND u.view_name= '{view_name}' ORDER BY u.view_schema, u.view_name) AS VIEW_DETAILS; -- Source https://dataedo.com/kb/query/postgresql/list-tables-used-by-a-view Query to get move around in partition table tree hierarchy #  SELECT * FROM pg_partition_root(table_name); SELECT * FROM pg_partition_ancestors(table_name); SELECT * FROM pg_partition_tree(table_name); 
  </dd>

  <dt>
    <a href="/docs/docs/usage-guidelines/api/offset-management-apis-usage/">Offset management</a>
  </dt>
  <dd class="markdown-inner">
    Spark-Structured Streaming Offset Management APIs #  spark-structured streaming has it&rsquo;s own offset management it does not
support storing consumed offset information in consumer group in kafka.
It uses checkpoint location which you provide. we are using s3 as
checkpoint location. Currently there is no APIs in spark-structured
streaming using which we can get information of currently consumed
offsets or reset offsets for current pipeline. We created APIs which
will do all of this work.
  </dd>

  <dt>
    <a href="/docs/docs/usage-guidelines/programmatic-access-and-integration/">programmatic access and Integration</a>
  </dt>
  <dd class="markdown-inner">
    Guidelines for programmatic Integration with DMDB #    Use only the user provided to you for your specific application. Even if you have any other credentials like developers credentials, some other application&rsquo;s credentials, etc.; dont use them. Ask for new credentials for each new application/dashboard.
  Connection Timeout (300ms) - Use this while making the connection to DB. If the connection fail within the timeout move further, log error (raise alarms).
  </dd>

</dl>

</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#example">Example</a></li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












